{% extends molecule('order-detail', '@SprykerShop:CustomerPage') %}

{% block body %}
    {% block orderActions %}
        {% embed molecule('action-bar') with {
            modifiers: ['first'],
            data: {
                title: 'customer.profile.order_details' | trans,
                actions: [
                    {
                        title: 'general.back.button' | trans,
                        url: url('customer/order'),
                        modifiers: ['hollow'],
                    },
                ],
            },
            embed: {
                order: data.order,
                jsName: 'js-customer-reorder-form',
            }
        } only %}
            {% block actions %}
                {{ parent() }}

                {% embed molecule('return-create-link', 'SalesReturnPage') ignore missing with {
                    class: config.name ~ '__action ' ~ embed.jsName ~ '__target-state-toggler button',
                    data: {
                        orderReference: embed.order.orderReference,
                    },
                } only %}
                    {%- block extraClass %}{% endblock -%}
                {% endembed %}

                <button class="{{ config.name }}__action button {{ embed.jsName }}__trigger" disabled>
                    {{ 'customer.order.reorder_selected' | trans }}
                </button>
            {% endblock %}
        {% endembed %}
    {% endblock %}

    {% block orderInfo %}
        {% include molecule('order-info', 'CustomerPage') with {
            data: {
                id: data.order.orderReference,
                date: data.order.createdAt | formatDateTime,
                order: data.order,
            },
        } only %}
    {% endblock %}

    {% block orderDetails %}
        {% include molecule('order-detail-table', 'CustomerPage') with {
            data: {
                shipmentGroups: data.shipmentGroups,
                orderShipmentExpenses: data.orderShipmentExpenses,
                currencyIsoCode: data.order.currencyIsoCode,
                order: data.order,
            },
        } only %}
    {% endblock %}

    {% block checkoutSummary %}
        <div class="grid grid--gap">
            <div class="col col--sm-12 col--lg-6">
                {% set paymentMethod = data.order.payments[0].paymentMethod %}

                {% include molecule('summary-item-box', 'CheckoutPage') ignore missing with {
                    modifiers: ['mobile-border-top'],
                    data: {
                        title: 'customer.order.payment' | trans,
                        method: paymentMethod,
                        iconName: paymentMethod | lower,
                    },
                } only %}
            </div>
            <div class="col col--sm-12 col--lg-6">
                {% include molecule('summary-item-box', 'CheckoutPage') ignore missing with {
                    data: {
                        title: 'customer.order.billing_address' | trans,
                        address: data.order.billingAddress,
                    },
                } only %}
            </div>
        </div>
    {% endblock %}

    {% block orderNote %}
        {% if data.order.cartNote is not empty %}
            {% include molecule('note-list', 'CartNoteWidget') ignore missing with {
                data: {
                    label: 'cart_note.customer_page.order_note',
                    note: data.order.cartNote,
                },
            } only %}
        {% endif %}
    {% endblock %}

    {% block orderSummary %}
        {% include molecule('order-summary', 'CustomerPage') with {
            data: {
                order: data.order,
            },
        } only %}
    {% endblock %}

    {% block buttonsStateHandler %}
        {% include molecule('order-buttons-disable-toggler', 'SalesReturnPage') ignore missing with {
            attributes: {
                'trigger-class-name': 'js-customer-reorder-form__selection',
                'target-class-name': 'js-customer-reorder-form__target-state-toggler',
                'is-disabled-when-checked': 'false',
                'disabled-class-name': 'button--disabled',
            },
        } only %}
    {% endblock %}
{% endblock %}
