{% extends view('return-view', '@SprykerShop:SalesReturnPage') %}

{% block salesReturnProductsSeparator %}{% endblock %}

{% block salesReturnContentHeader %}
    {% embed molecule('return-overview', 'SalesReturnPage') with {
        data: {
            returnItems: data.returnItems,
            returnReference: data.return.returnReference,
            createdAt: data.return.createdAt,
            uniqueOrderReferences: data.uniqueOrderReferences,
        },
        embed: {
            returnReference: data.return.returnReference,
        },
    } only %}
        {% block headline %}
            {% embed molecule('action-bar') with {
                modifiers: ['first'],
                data: {
                    title: 'return_page.details.page_title' | trans,
                    actions: [
                        {
                            title: 'return_page.details.actions.back_to_list' | trans,
                            url: url('return/list'),
                            modifiers: ['hollow'],
                            icon: '',
                        },
                        {
                            title: 'return_page.details.actions.print_slip' | trans,
                            url: path('return/slip-print', {returnReference: (embed.returnReference)}),
                            icon: '',
                            primary: true,
                        },
                    ],
                },
            } only %}
                {% block actions %}
                    {% for action in data.actions %}
                        {% set modifiers = (action.modifiers | default((action.primary | default(false)) ? [] : ['hollow'])) %}
                        <a class="{{ component.renderClass('button', modifiers) }} {{ config.name }}__action" href="{{ action.url }}" {% if loop.last %}target="_blank"{% endif %}>
                            {% if action.icon | default(false) %}
                                {% include atom('icon') with {
                                    class: config.name ~ '__icon',
                                    data: {
                                        name: action.icon,
                                    },
                                } only %}
                            {% endif %}

                            {{ action.title }}
                        </a>
                    {% endfor %}
                {% endblock %}
            {% endembed %}
        {% endblock %}

        {% block separator %}{% endblock %}

        {% block info %}
            {% set infoClass = config.name ~ '__list' %}

            {{ parent() }}
        {% endblock %}

        {% block orderRefInner %}
            {{ 'return_page.order_reference' | trans }}
            {% for idSalesOrder, orderReference in data.uniqueOrderReferences %}
                {% embed molecule('order-detail-link', 'CustomerPage') ignore missing with {
                    data: {
                        idSalesOrder: idSalesOrder,
                        text: orderReference,
                    },
                } only %}
                    {% block extraClass %} link link--secondary{% endblock %}
                {% endembed %}
                {%- if not loop.last -%},&nbsp{%- endif -%}
            {% endfor %}
        {% endblock %}
    {% endembed %}
{% endblock %}

{% block salesReturnContent %}
    {% set contentWrapperClass = '' %}

    {{ parent() }}
{% endblock %}

{% block salesReturnProductItem %}
    {% set salesReturnProductItemClass = 'grid grid--middle grid--justify' %}

    {{ parent() }}
{% endblock %}

{% block salesReturnTotal %}
    {% set salesReturnTotalClass = 'spacing-top spacing-top--biggest' %}

    {% embed molecule('return-total', 'SalesReturnPage') with {
        class: salesReturnTotalClass,
        data: {
            returnItemsCount: data.returnItems | length,
            remunerationTotal: data.return.returnTotals.remunerationTotal,
            currencyIsoCode: data.return.returnItems[0].orderItem.currencyIsoCode,
        },
    } only %}
        {% block body %}
            {% set returnTotalRowClass = config.name ~ '__row grid grid--justify' %}

            {{ parent() }}
        {% endblock %}

        {% block separatorTop %}{% endblock %}

        {% block separatorMiddle %}{% endblock %}

        {% block remunerationTotal %}
            {% set remunerationTotalClass = returnTotalRowClass %}

            {{ parent() }}
        {% endblock %}

        {% block itemsToReturn %}
            {% set itemsToReturnClass = returnTotalRowClass %}

            {{ parent() }}
        {% endblock %}

        {% block itemsToReturnInnerValue %}
            {% set itemsToReturnValueClass = config.name ~ '__counter col' %}

            {{ parent() }}
        {% endblock %}
    {% endembed %}
{% endblock %}
