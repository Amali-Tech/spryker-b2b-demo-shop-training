{% extends model('component') %}

{% define config = {
    name: 'language-switcher',
    tag: 'language-switcher'
} %}

{% define data = {
    languages: required,
    currentLanguage: required,
    getSchemeAndHttpHost: required
} %}

{% block body %}
    {% embed molecule('custom-select') with {
        modifiers: ['alternative'],
        attributes: {
            'onchange': '',
            'config-theme': 'alternative'
        },
        embed: {
            jsName: config.jsName,
            languages: data.languages,
            currentLanguage: data.currentLanguage,
            getSchemeAndHttpHost: data.getSchemeAndHttpHost
        }
    } only %}
        {% block selectClass %}
            {{ parent() }} {{ embed.jsName }}
        {% endblock %}
        {% block options %}
            {% for language, url in embed.languages %}
                <option
                        value="{{ embed.getSchemeAndHttpHost }}{{ url }}"
                        {{ (language == embed.currentLanguage) ? 'selected' : ''}}>
                    {{ language | upper }}
                </option>
            {% endfor %}
        {% endblock %}
        {% block caret %}
            {% include atom('icon') with {
                class: config.name ~ '__caret is-hidden-sm-md',
                data: {
                    name: 'caret-down'
                }
            } only %}

            {% include atom('icon') with {
                class: config.name ~ '__caret is-hidden-lg-xl',
                data: {
                    name: 'double-chevrons'
                }
            } only %}
        {% endblock %}
    {% endembed %}
{% endblock %}
