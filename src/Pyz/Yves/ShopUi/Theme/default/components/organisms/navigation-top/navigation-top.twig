{% extends model('component') %}

{% define config = {
    name: 'navigation-top',
    tag: 'div'
} %}

{% set benefits = [
    'global.benefit.free_returns',
    'global.benefit.warranty',
    'global.benefit.competitive_prices'
] %}

{% block benefit %}
    {% include molecule('panel-info-item') with {
        class: 'col',
        data: {
            info: text
        }
    } only %}
{% endblock %}

{% block body %}

    {% for text in benefits %}
        {% if not loop.last %}
            {{ block('benefit') }}
        {% elseif not is_granted('ROLE_USER') %}
            {{ block('benefit') }}
        {% endif %}
    {% endfor %}

    <ul class="col grid grid--nowrap grid--stretch navigation-top__actions">
        <li class="col {{ config.name }}__action-item {{ config.name }}__tel">
            {% include atom('icon') with {
                modifiers: ['phone'],
                data: {
                    name: 'phone'
                }
            } only %}
            +49 (0) 30 208 498 350
        </li>

        {% if is_granted('ROLE_USER') %}
            <li class="col {{ config.name }}__action-item">
                {{ widgetGlobal('PriceModeSwitcherWidgetPlugin') }}
            </li>
            <li class="col {{ config.name }}__action-item">
                {{ widgetGlobal('CurrencyWidgetPlugin') }}
            </li>
        {% endif %}

        <li class="col {{ config.name }}__action-item">
            {{ widgetGlobal(
                'LanguageSwitcherWidgetPlugin',
                app.request.pathInfo,
                app.request.queryString,
                app.request.requestUri
            ) }}
        </li>

        {% if is_granted('ROLE_USER') and hasCompanyAccess() %}
            {% if widgetGlobalExists('MenuItemCompanyWidgetPlugin') %}
                <li class="col {{ config.name }}__action-item">
                    {% spaceless %}{{ widgetGlobal('MenuItemCompanyWidgetPlugin') }}{% endspaceless %}
                    {% if can('SeeCompanyMenuPermissionPlugin') %}
                        {% include molecule('navigation-list') with {
                            modifiers: ['company-user'],
                            data: {
                                nodes: [{
                                    url: 'company/overview',
                                    title: 'company.account.overview' | trans,
                                    nodeType: 'link',
                                    isActive: true,
                                    validFrom: ''
                                },
                                {
                                    url: 'company/user',
                                    title: 'company.account.company_role.users' | trans,
                                    nodeType: 'link',
                                    isActive: true,
                                    validFrom: ''
                                },
                                {
                                    url: 'company/business-unit',
                                    title: 'company.account.business_unit' | trans,
                                    nodeType: 'link',
                                    isActive: true,
                                    validFrom: ''
                                },
                                {
                                    url: 'company/company-role',
                                    title: 'company.account.company_user.role' | trans,
                                    nodeType: 'link',
                                    isActive: true,
                                    validFrom: ''
                                }]
                            }
                        } only %}
                    {% endif %}
                </li>
            {% endif %}
        {% endif %}
    </ul>
{% endblock %}
