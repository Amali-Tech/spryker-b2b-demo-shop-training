{% extends model('component') %}

{% define config = {
    name: 'side-drawer',
    tag: 'side-drawer'
} %}

{% define attributes = {
    'trigger-selector': required,
    'container-selector': '',
    'locked-body-selector': 'is-not-scrollable'
} %}

{% block body %}
    <div class="{{config.name}}__overlay {{attributes['trigger-selector']}}"></div>

    <aside class="{{config.name}}__drawer">
        {% block close %}
            <button class="{{config.name}}__close {{attributes['trigger-selector']}}">
                {% include atom('icon') with {
                    data: {
                        name: 'cross'
                    }
                } only %}
            </button>
        {% endblock %}

        {% set gridClass = is_granted('ROLE_USER') ? 'grid--gap grid--right' : 'grid--gap-smaller' %}

        <div class="grid {{ gridClass }} {{config.name}}__navigation-top">
            {% if is_granted('ROLE_USER') %}
                <div class="col">
                    <a href="{{ url('company/overview') }}" class="link link--alternative {{config.name}}__user-link">
                        {% include atom('icon') with {
                            class: config.name ~ '__user-link-icon',
                            modifiers: ['big'],
                            data: {
                                name: 'office'
                            }
                        } only %}
                        {{ 'customer.address.company'|trans }}
                    </a>
                </div>
                <div class="col">
                    <a href="{{ url('customer/overview') }}" class="link link--alternative {{config.name}}__user-link">
                        {% include atom('icon') with {
                            class: config.name ~ '__user-link-icon',
                            modifiers: ['big'],
                            data: {
                                name: 'user'
                            }
                        } only %}
                        {{ 'global.account'|trans }}
                    </a>
                </div>
            {% else %}
                <div class="col col--sm-4 {{config.name}}__navigation-top-lang">
                    {% widget 'LanguageSwitcherWidget' args [app.request.pathInfo, app.request.queryString, app.request.requestUri] only %}{% endwidget %}
                </div>
                <div class="col {{config.name}}__navigation-top-login">
                    <a href="{{ url('login') }}" class="button button--tight button--expand {{ config.name }}__login">{{ 'customer.please_login'|trans }}</a>
                </div>
            {% endif %}
        </div>

        <div class="{{config.name}}__holder">
            {% if is_granted('ROLE_USER') %}
                <div class="grid grid--gap-smaller {{config.name}}__actions">
                    <div class="col col--sm-4">
                        {% widget 'PriceModeSwitcherWidget' only %}{% endwidget %}
                    </div>
                    <div class="col col--sm-4">
                        {% widget 'CurrencyWidget' only %}{% endwidget %}
                    </div>
                    <div class="col col--sm-4">
                        {% widget 'LanguageSwitcherWidget' args [app.request.pathInfo, app.request.queryString, app.request.requestUri] only %}{% endwidget %}
                    </div>
                </div>
            {% endif %}

            <div class="{{config.name}}__navigation">
                {% widget 'NavigationWidget' args ['MAIN_NAVIGATION', 'navigation-main'] only %}{% endwidget %}
            </div>

            <a href="tel:+49030208498350" class="{{config.name}}__contact">
                <span class="{{config.name}}__contact-icon">
                    {% include atom('icon') with {
                        modifiers: ['bigger'],
                        data: {
                            name: 'cell-phone'
                        }
                    } only %}
                </span>
                <span class="{{config.name}}__contact-text {{config.name}}__contact-text--weight">Contact us:</span>
                <span class="{{config.name}}__contact-text">+49 (0)30 208 498 350</span>
            </a>

            {% if is_granted('ROLE_USER') %}
                <a href="{{ url('logout') }}" class="spacing-top spacing-top--big button button--hollow button--expand">Logout</a>
            {% endif %}
        </div>
    </aside>
{% endblock %}
